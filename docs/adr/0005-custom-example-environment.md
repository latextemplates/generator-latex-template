# Use custom LaTeX environment for example presentation

## Context and Problem Statement

We want to present LaTeX examples.
They should be shown both as LaTeX source and as rendered output.

## Decision Drives

* Write once - have two outputs (source and rendered)
* Good interaction with all pacakges
* Should support floats
* Should support compilation without special configuration (such as `--shell-escape`)

## Considered Options

* Custom solution to present LaTeX code and rendered output
* `cnltx-example` (part of [`cnltx`](https://www.ctan.org/pkg/cnltx))
* [`examplep`](https://github.com/koppor/examplep)
* [`tcolorbox`](https://www.ctan.org/pkg/tcolorbox)
* [`showexpl`](https://ctan.org/pkg/showexpl)
* [`latexdemo`](https://ctan.org/pkg/latexdemo)
* `tkzexample` (part of [`tkz-doc`](https://ctan.org/pkg/tkz-doc))
* `fancyvrb-ex` (part of [`facnyvrb`](https://ctan.org/pkg/fancyvrb))
* [`sverb`](https://www.ctan.org/pkg/sverb)
* `lstdoc` (part of [`listings`](https://www.ctan.org/pkg/listings))
* `ydoc-expl` (part of [`ydoc`](https://www.ctan.org/pkg/ydoc))
* [`gincltex`](https://ctan.org/pkg/gincltex)
* [`minted`](https://ctan.org/pkg/minted)
* Self-made with [standalone](https://ctan.org/pkg/standalone) package

See also

* <https://tex.stackexchange.com/q/19295/9075>
* [CTAN's macro-demo topic](https://ctan.org/topic/macro-demo)

## Decision Outcome

Chosen option: "custom solution", because resolves all forces.

### Positive Consequences

* Works with floats and umlauts

### Negative Consequences

* A little bit more than minimal code is presented to the user

## Pros and Cons of the Options

### `cnltx-example`

Hint: Bold typewriter keywords can be generated by the LuxiMono package (hint by listings package).

* Good, because offers nice boxes
* Good, because [offers floating environments](https://github.com/cgnieder/cnltx/issues/4)
* Bad, because floating environments have to be enabled by [some lines of LaTeX code](https://github.com/cgnieder/cnltx/issues/4#issuecomment-625693834)
* Bad, because [code needs to be patched](https://github.com/cgnieder/cnltx/pull/7) to show code first
* Bad, because [does not support umlauts](https://github.com/cgnieder/cnltx/issues/5)

### examplep

* Good, because allows for minipages automatically set to correctly render the LaTeX source.
* Bad, because it is GPL-licensed and thus requires all tex files to be GPL-licensed, too.
* Bad, because it does not fully support floating environments. See [examplep#1](https://github.com/koppor/examplep/issues/1) for details.

### showexpl

* Good, because [supports floats](https://github.com/rolfn/showexpl/issues/1)
* Good, because the output is rather minimalistic, but still looks good
* Bad, because [does not support referencing inside the environment](https://github.com/rolfn/showexpl/issues/5)

### tcolorbox, latexdemo, tkzexample, fancyvrb-ex

* Good, because nice boxes
* Bad, because all of them do not support floating environments

### sverb

* Bad, because it does not support floating environments

### lstdoc

* Bad, because works only within listings documentation properly (otherwise, it causes issues)

### ydoc-expl

### gincltex

Includes `.tex` as graphics.

* Bad, because rendering as source and rendered output has to be done "on top".

### minted

The source code contains the `example` environment (taken from <http://blog.karssen.org/2009/11/15/a-latex-example-environment/>): <https://github.com/gpoore/minted/blob/5d72859d714a6f2f6a42eec524476994d954b960/source/minted.dtx#L134>.

* Bad, because does not deal with protection.

### Self-made with [standalone](https://ctan.org/pkg/standalone) package

* Good, because complete documents can be typeset
* Bad, because -write-18 will be required

<!-- markdownlint-disable-file MD013 -->
