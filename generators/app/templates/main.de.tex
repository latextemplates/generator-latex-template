% !TeX spellcheck = de-DE
% !TeX encoding = utf8
% !TeX program = <%= latexcompiler %>
% !BIB program = <%= bibtextool %>
% -*- coding:utf-8 mod:LaTeX -*-

<% if (documentclass === 'scientific-thesis') { %>
% The following package allows \\ at the title page
% For more information see https://github.com/latextemplates/scientific-thesis-cover/issues/4
\RequirePackage{kvoptions-patch}
<% } %>

<% if (latexcompiler !== 'lualatex') { %>
% Neue deutsche Trennmuster
% Siehe http://www.ctan.org/pkg/dehyph-exptl und http://projekte.dante.de/Trennmuster/WebHome
% Nur für pdflatex, nicht für lualatex
\RequirePackage[ngerman=ngerman-x-latest]{hyphsubst}
<% } %>

\documentclass[
  % fontsize=11pt is the standard
  % ()Aus scrguide.pdf - der Dokumentation von KOMA-Script)
  % Nach DUDEN steht in Gliederungen, in denen ausschließlich arabische Ziffern für die Nummerierung
  % verwendet werden, am Ende der Gliederungsnummern kein abschließender Punkt
  % (siehe [DUD96, R3]). Wird hingegen innerhalb der Gliederung auch mit römischen Zahlen
  % oder Groß- oder Kleinbuchstaben gearbeitet, so steht am Ende aller Gliederungsnummern ein
  % abschließender Punkt (siehe [DUD96, R4])
  numbers=autoendperiod,
  a4paper,  % Standard format - only KOMAScript uses paper=a4 - https://tex.stackexchange.com/a/61044/9075
  twoside,  % we are optimizing for both screen and two-side printing. So the page numbers will jump, but the content is configured to stay in the middle (by using the geometry package)
  bibliography=totoc,
  %               idxtotoc,   % Index ins Inhaltsverzeichnis
  %               liststotoc, % List of X ins Inhaltsverzeichnis, mit liststotocnumbered werden die Abbildungsverzeichnisse nummeriert
  headsepline,
  cleardoublepage=empty,
  parskip=half,
  %               draft    % um zu sehen, wo noch nachgebessert werden muss - wichtig, da Bindungskorrektur mit drin
  draft=false
]{scrbook}

<% if (latexcompiler == "pdflatex") { -%>
\usepackage{cmap}
<% } -%>

% backticks (`) werden als solches in verbatim-Umgebungen dargestellt
% Details unter:
%   - https://tex.stackexchange.com/a/341057/9075
%   - https://tex.stackexchange.com/a/47451/9075
%   - https://tex.stackexchange.com/a/166791/9075
\usepackage{upquote}

<%- include('babel.preamble.tex', this); %>
<%- include('url.preamble.de.tex', this); %>
<%- include('font.preamble.en.tex', this); %>
<%- include('microtype.preamble.de.tex', this); %>
<%- include('listings.preamble.de.tex', this); %>
<%- include('hyperref.preamble.en.tex', this); %>
<% if (cleveref) { %><%- include('cleveref.preamble.de.tex', this); %><% } -%>

<% if (useExampleEnvironment) { -%>
\usepackage{cnltx-example}
\setcnltx{add-listings-options={literate=},gobble=0}
\makeatletter
\newcommand*\expl@fakefloatbegin[1]{%
  \def\@captype{#1}%
  \vskip\intextsep
  \color@vbox
    \normalcolor
    \vbox \bgroup
      \hsize\columnwidth
      \@parboxrestore
      \@floatboxreset
}
\newcommand*\expl@fakefloatend{\@endfloatbox\vskip\intextsep}

\newcommand*\expl@resetcounter[1]{%
  \ifstrequal{#1}{page}{}{\setcounter{#1}{0}}%
}

\setcnltx{
  add-cmds = {listoffigures} ,
  pre-code={%
    \let\addtocontents\@gobbletwo
    \let\@elt\expl@resetcounter \cl@@ckpt
    \renewenvironment{figure}[1][]{\expl@fakefloatbegin{figure}}{\expl@fakefloatend}%
  }
}
\makeatother
<% } -%>

\begin{document}

<% if (examples) { -%>
<%= heading1 %>{LaTeX Hinweise}
\label{chap:latexhints}

Hier sollen allgemeine \LaTeX-Hinweise gegeben werden, damit man Minimalbeispiele vorliegen hat, um sofort loszulegen.

<%- include('paragraphs.example.de.tex', this); %>
<%- // include('figure.example.de.tex', this); %>
<%- // include('listings.example.de.tex', this); %>
<% } -%>

\end{document}
